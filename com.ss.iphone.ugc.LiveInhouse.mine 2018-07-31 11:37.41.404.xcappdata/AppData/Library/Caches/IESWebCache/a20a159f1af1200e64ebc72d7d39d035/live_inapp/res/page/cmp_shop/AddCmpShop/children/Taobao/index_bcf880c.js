define("page/cmp_shop/AddCmpShop/children/Taobao/index.vue",function(t,e,o){function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(t("component/Bus/index")),n=s(t("node_modules/axios/index")),d=s(t("node_modules/qs/lib/index")),a=s(t("component/cmp_shop/ComList/index.vue")),r=s(t("node_modules/byted-via-hotsoon/dist/via.hotsoon.min")),u={data:function(){return{goodsList:[],showTips:!1,clipboardShow:!1,hasMore:!0,offset:0,count:10,pending:!1}},components:{ComList:a.default},created:function(){var t=this;r.default.device.getClipboardData(function(e){var o="";1===e.code&&(o=e.data.data),o&&r.default.device.setClipboardData({data:""}),t.renderGoodsList(o)}),window.addEventListener("scroll",this.bindScroll)},destroyed:function(){window.removeEventListener("scroll",this.bindScroll)},mounted:function(){var t=this;i.default.$on("searchlist",function(e){t.clipboardShow=!1,t.renderGoodsList(e)})},methods:{fetch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";if("get"===o)return n.default.get(t,{params:e,timeout:5e3});var s=d.default.stringify(e);return n.default.post(t,s)},getGoodsList:function(t){var e=this;if(this.pending)return Promise.resolve("pending");this.pending=!0;var o="";return o=t?"/web/api/taobao/tpwd/list/":"/web/api/taobao/feed/list/",this.fetch(o,{offset:this.offset,count:this.count,password:t}).then(function(o){if(e.pending=!1,0===o.data.status_code){var s=o.data.data.promotions;return i.default.$emit("searchKeywords",t),e.clipboardShow=t?!0:!1,s}return i.default.$emit("searchKeywords",t),e.clipboardShow=t?!0:!1,[]}).catch(function(){return r.default.app.showToast({title:"网络请求失败，请重新尝试"}),i.default.$emit("searchKeywords",t),e.clipboardShow=t?!0:!1,e.pending=!1,[]})},renderGoodsList:function(t){var e=this;this.offset=0,this.hasMore=!0,this.showTips=!1,this.getGoodsList(t).then(function(t){return"pending"===t?void 0:(t&&t.length?(t.length<e.count&&(e.hasMore=!1),e.offset+=t.length):e.showTips=!0,void(e.goodsList=t))})},bindScroll:function(){var t=document.height||document.body.scrollHeight,e=100;scrollY>=t-innerHeight-e&&this.loadMore()},loadMore:function(){var t=this;this.getGoodsList().then(function(e){return"pending"===e?void 0:void(!e||e.length<=0?t.hasMore=!1:(t.hasMore=!0,t.offset+=e.length,t.goodsList=t.goodsList.concat(e)))})}}};e.default=u;var c;c=e&&e.__esModule&&e.default?e.default:o.exports,c.render=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"taobaolist"},[t.clipboardShow?o("div",{staticClass:"clipboard-tips"},[t._v("已自动识别剪切板中的淘口令商品")]):t._e(),t._v(" "),o("ComList",{directives:[{name:"show",rawName:"v-show",value:!t.showTips,expression:"!showTips"}],attrs:{data:t.goodsList,hasMore:t.hasMore}}),t._v(" "),t.showTips?o("div",{staticClass:"tips"},[t._v("\n          没有找到相关商品\n      ")]):t._e()],1)},c.staticRenderFns=[],c._scopeId="_v-fd55c652"});