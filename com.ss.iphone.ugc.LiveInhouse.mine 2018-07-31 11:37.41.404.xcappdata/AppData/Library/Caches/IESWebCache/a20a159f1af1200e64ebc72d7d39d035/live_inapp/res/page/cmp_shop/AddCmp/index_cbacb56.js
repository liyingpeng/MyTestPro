define("page/cmp_shop/AddCmp/index.vue",function(t,e,n){function s(t){return t&&t.__esModule?t:{"default":t}}function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},i.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(t("node_modules/axios/index")),r=(s(t("component/util/common")),s(t("component/cmp_shop/ComList/index.vue"))),c=s(t("node_modules/byted-via-hotsoon/dist/via.hotsoon.min")),a={data:function(){return{recent_offset:0,recent_count:10,recomm_offset:0,recomm_count:10,recentList:[],recommendList:[],hasMoreRecommend:!0,showTips:!1,getFlag:!1,recent_pending:!1,recomm_pending:!1}},components:{ComList:r.default},created:function(){this.renderGoodsList(),window.addEventListener("scroll",this.bindScroll)},destroyed:function(){window.removeEventListener("scroll",this.bindScroll)},methods:{fetch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";if("get"===n)return o.default.get(t,{params:e,timeout:5e3});var s=qs.stringify(e);return o.default.post(t,s)},getRecentList:function(){var t=this;return this.recent_pending?Promise.resolve("pending"):(this.recent_pending=!0,this.fetch("/web/api/ecom/recent/list/",{offset:this.recent_offset,count:this.recent_count}).then(function(e){return t.recent_pending=!1,0===e.data.status_code?(t.recent_offset+=e.data.data.promotions.length,e.data.data.promotions):[]}).catch(function(){return t.recent_pending=!1,c.default.app.showToast({title:"网络请求失败，请重新尝试"}),[]}))},getRecommendList:function(){var t=this;return this.recomm_pending?Promise.resolve("pending"):(this.recomm_pending=!0,this.fetch("/web/api/ecom/feed/list/",{offset:this.recomm_offset,count:this.recomm_count}).then(function(e){return t.recomm_pending=!1,0===e.data.status_code?(t.recomm_offset+=e.data.data.promotions.length,e.data.data.promotions):[]}).catch(function(){return t.recomm_pending=!1,c.default.app.showToast({title:"网络请求失败，请重新尝试"}),[]}))},bindScroll:function(t){var e=this,n=300,s=document.height||document.body.scrollHeight;scrollY>=s-innerHeight-n&&e.loadMore(t)},loadMore:function(t){var e=this;"recent"==t?this.getRecentList().then(function(t){return"pending"===t?void 0:void(e.recentList=e.recentList.concat(t))}):this.getRecommendList().then(function(t){return"pending"===t?void 0:void(t.length<=0?e.hasMoreRecommend=!1:(e.hasMoreRecommend=!0,e.recommendList=e.recommendList.concat(t)))})},renderGoodsList:function(){var t=this;this.getRecentList().then(function(e){t.recentList=e,t.getFlag=!0,t.recentList.length<10&&(t.showTips=!1,t.getRecommendList().then(function(e){e&&e.length||(t.showTips=!0),e.length<t.recomm_count&&(t.hasMoreRecommend=!1),t.recommendList=e}))})},jumpToShop:function(){this.$router.push({name:"featured",query:i({},this.$route.query)})}}};e.default=a;var d;d=e&&e.__esModule&&e.default?e.default:n.exports,d.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"com-list-wrapper"},[n("div",{staticClass:"com-list"},[n("div"),t._v(" "),t.recentList.length?n("div",{staticClass:"nav-header"},[n("div",{staticClass:"nav-title"},[t._v("我添加过的商品")]),t._v(" "),n("div",{staticClass:"nav-add",on:{click:t.jumpToShop}},[n("img",{attrs:{src:"//hotsoon.snssdk.com/falcon/live_inapp/res/static/image/cmp_shop/icon-titlebar-settings_185ff30.png"}}),t._v(" "),n("span",[t._v("添加商品")])])]):t._e(),t._v(" "),!t.recentList.length&&t.getFlag?n("div",{staticClass:"cmp-hint"},[n("div",{staticClass:"cmp-hint-detail"},[n("div",{staticClass:"text"},[t._v("商品库暂无商品，快去添加吧~")]),t._v(" "),n("div",{staticClass:"button",on:{click:t.jumpToShop}},[t._v("添加商品")])])]):n("div",{staticClass:"cmp-list"},[n("ComList",{attrs:{data:t.recentList}})],1)]),t._v(" "),t.recentList.length<10&&!t.showTips?n("div",{staticClass:"com-list"},[t._m(0),t._v(" "),n("div",{staticClass:"cmp-list"},[n("ComList",{attrs:{data:t.recommendList,hasMore:t.hasMoreRecommend}})],1)]):t._e(),t._v(" "),!t.recentList.length&&t.showTips?n("div",{staticClass:"tips"},[t._v("\n      没有相关展示商品，请检查网络\n  ")]):t._e()])},d.staticRenderFns=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-header"},[n("div",{staticClass:"nav-title"},[t._v("推荐的商品")])])}],d._scopeId="_v-23e61953"});