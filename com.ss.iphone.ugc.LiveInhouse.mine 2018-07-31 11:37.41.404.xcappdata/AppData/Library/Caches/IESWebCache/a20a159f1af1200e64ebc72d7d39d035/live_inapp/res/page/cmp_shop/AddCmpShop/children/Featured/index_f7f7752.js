define("page/cmp_shop/AddCmpShop/children/Featured/index.vue",function(t,e,s){function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(t("component/Bus/index")),n=o(t("node_modules/axios/index")),r=o(t("node_modules/qs/lib/index")),d=o(t("component/cmp_shop/ComList/index.vue")),a=o(t("node_modules/byted-via-hotsoon/dist/via.hotsoon.min")),c={data:function(){return{goodsList:[],offset:0,count:10,hasMore:!0,order_by:"cos_fee",sort:"2",title:"",showTips:!1,pending:!1}},computed:{sortType:function(){return"2"===this.sort?"dsc":"1"===this.sort?"asc":""}},created:function(){this.renderGoodsList(),window.addEventListener("scroll",this.bindScroll)},destroyed:function(){window.removeEventListener("scroll",this.bindScroll)},mounted:function(){var t=this;i.default.$on("searchlist",function(e){t.title=e,t.renderGoodsList()})},components:{ComList:d.default},methods:{fetch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";if("get"===s)return n.default.get(t,{params:e,timeout:5e3});var o=r.default.stringify(e);return n.default.post(t,o)},getGoodsList:function(){var t=this;return this.pending?Promise.resolve("pending"):(this.pending=!0,this.fetch("/web/api/ecom/search/list/",{offset:this.offset,count:this.count,order_by:this.order_by,sort:this.sort,title:this.title}).then(function(e){if(t.pending=!1,0===e.data.status_code){var s=e.data.data.promotions;return s}return[]}).catch(function(){return t.pending=!1,a.default.app.showToast({title:"网络请求失败，请重新尝试"}),[]}))},bindScroll:function(){var t=document.height||document.body.scrollHeight,e=100;scrollY>=t-innerHeight-e&&this.loadMore()},sortList:function(t){var e=t.target.dataset.type;this.order_by==e?this.sort="2"===this.sort?"1":"2":(this.order_by=e,this.sort="2"),this.renderGoodsList()},renderGoodsList:function(){var t=this;this.offset=0,this.hasMore=!0,this.showTips=!1,this.getGoodsList().then(function(e){return"pending"===e?void 0:(e&&e.length?(e.length<t.count&&(t.hasMore=!1),t.offset+=e.length):t.showTips=!0,void(t.goodsList=e))})},loadMore:function(){var t=this;this.getGoodsList().then(function(e){return"pending"===e?void 0:void(!e||e.length<=0?t.hasMore=!1:(t.hasMore=!0,t.offset+=e.length,t.goodsList=t.goodsList.concat(e)))})}}};e.default=c;var h;h=e&&e.__esModule&&e.default?e.default:s.exports,h.render=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shop-wrapper"},[s("div",{staticClass:"sort-type-wrapper",on:{click:t.sortList}},[s("div",{staticClass:"item","class":[{active:"price"==t.order_by},t.sortType],attrs:{"data-type":"price"}},[t._v("价格")]),t._v(" "),s("div",{staticClass:"item","class":[{active:"cos_fee"==t.order_by},t.sortType],attrs:{"data-type":"cos_fee"}},[t._v("佣金")]),t._v(" "),s("div",{staticClass:"item","class":[{active:"sell_num"==t.order_by},t.sortType],attrs:{"data-type":"sell_num"}},[t._v("销量")])]),t._v(" "),s("div",{staticClass:"cmp-list"},[s("ComList",{directives:[{name:"show",rawName:"v-show",value:!t.showTips,expression:"!showTips"}],attrs:{data:t.goodsList,hasMore:t.hasMore}}),t._v(" "),t.showTips?s("div",{staticClass:"tips"},[t._v("\n            没有找到相关商品\n        ")]):t._e()],1)])},h.staticRenderFns=[],h._scopeId="_v-2435641b"});