define("component/util/huoshan",function(e,n){function t(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)t=u[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o.apply(this,arguments)}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,n,t){return n&&u(e.prototype,n),t&&u(e,t),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=t(e("node_modules/byted-via-hotsoon/dist/via.hotsoon.min")),p={SUCCESS:{code:1},FAIL:{code:0},ILLEGAL:{code:-1},LOW:{code:-2}},l=function(){function e(){var n=this;r(this,e),this._appInfo=null,this._appVersion=0,this._apiParams=null,this.getAppInfo().then(function(){n.getAppVersion()}),this.getApiParams()}return i(e,[{key:"getAppInfo",value:function(){var e=this;return new Promise(function(n){e._appInfo?n(e._appInfo):s.default.app.getAppInfo().then(function(t){e._appInfo=t.data,n(t.data)})})}},{key:"getAppVersion",value:function(){var e=this;return new Promise(function(n){e._appVersion?n(e._appVersion):(s.default.appVersion&&(e._appVersion=s.default.appVersion.replace(/\./g,""),e._appVersion=parseInt(e._appVersion,10)),n(e._appVersion))})}},{key:"getApiParams",value:function(){var e=this;return new Promise(function(n){e._apiParams?n(e._apiParams):s.default.app.getApiParam().then(function(t){e._apiParams=t.data,n(t.data)})})}},{key:"getUserInfo",value:function(){return s.default.app.getUserInfo().then(function(e){var n=e.data,t=e.code;return o({code:t},n)})}},{key:"share",value:function(e,n,t,a,o){return new Promise(function(r,u){try{window.ToutiaoJSBridge.call("share",{platform:e,title:n,desc:t,image:a,url:o},function(e){r(e)})}catch(i){u(p.FAIL)}})}},{key:"setShareInfo",value:function(e,n,t){var a=this;return new Promise(function(o,r){a.getAppVersion().then(function(a){if(200>a)r(p.LOW);else{t=t||{};try{window.ToutiaoJSBridge.call("shareInfo",{type:e,data:n,activity_key:{type:t.type||"",id:t.id||""}},function(e){o(e)})}catch(u){r(p.FAIL)}}}).catch(function(){r(p.FAIL)})})}},{key:"openSharePanel",value:function(){}},{key:"openRoom",value:function(e){var n=this;return new Promise(function(t,a){n.getAppVersion().then(function(n){if(135>n)a(p.LOW);else try{window.ToutiaoJSBridge.call("openHotsoon",{type:"room",args:{room_id:e}},function(e){t(e)})}catch(o){a(p.FAIL)}}).catch(function(){a(p.FAIL)})})}},{key:"openProfile",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return s.default.app.openUserProfile({user_id:e,extended:{detail_label:n,enter_from:n,page_source:t}})}},{key:"openHashtag",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search_sug",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return s.default.app.openHashtagCollection({id:e,extended:{enter_from:n,action_type:t,source:a}})}},{key:"openCharge",value:function(){var e=this;return new Promise(function(n,t){e.getAppVersion().then(function(e){if(135>e)t(p.LOW);else try{window.ToutiaoJSBridge.call("openHotsoon",{type:"charge"},function(e){n(e)})}catch(a){t(p.FAIL)}}).catch(function(){t(p.FAIL)})})}},{key:"openNotice",value:function(){var e=this;return new Promise(function(n,t){e.getAppVersion().then(function(e){if(135>e)t(p.LOW);else try{window.ToutiaoJSBridge.call("openHotsoon",{type:"notification"},function(e){n(e)})}catch(a){t(p.FAIL)}}).catch(function(){t(p.FAIL)})})}},{key:"openVideo",value:function(e,n){return s.default.app.openShortVideo({video_id:e,extended:{detail_label:n}})}},{key:"openFeedback",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.app.openFeedBackFromId({feedback_id:e,extended:{source:n}})}},{key:"feedbackSend",value:function(e,n,t){var a=this;return new Promise(function(o,r){a.getAppVersion().then(function(a){if(330>a)r(p.LOW);else try{window.ToutiaoJSBridge.call("openHotsoon",{type:"feedback_send",args:{feedback_id:e,source:n,msg:t}},function(e){o(e)})}catch(u){r(p.FAIL)}}).catch(function(){r(p.FAIL)})})}},{key:"shootVideo",value:function(e){var n=this;return new Promise(function(t,a){n.getAppVersion().then(function(n){if(135>n)a(p.LOW);else try{window.ToutiaoJSBridge.call("openHotsoon",{type:"item",args:{item_id:e}},function(e){t(e)})}catch(o){a(p.FAIL)}}).catch(function(){a(p.FAIL)})})}},{key:"openLogin",value:function(){return s.default.app.openLoginPanel()}},{key:"syncFollowStatus",value:function(e,n){return s.default.app.syncUserFollowStatus({user_id:e,follow_status:n})}},{key:"syncProductStatus",value:function(e,n){return s.default.app.syncProductStatus({video_id:e,product_status:n})}},{key:"unfollowUser",value:function(e,n){return s.default.app.userUnFollow({user_id:e,extended:{from_label:n}})}},{key:"followUser",value:function(e,n){return s.default.app.userFollow({user_id:e,extended:{from_label:n}})}},{key:"showToast",value:function(e){return s.default.app.showToast({title:e})}},{key:"sendAppLog",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return s.default.app.sendLog({eventName:e,labelName:n,value:t,ext_value:a,ext_json:o})}},{key:"sendAppLogV3",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.default.app.sendLogV3({eventName:e,params:n})}},{key:"closeWebview",value:function(){return s.default.view.popView()}},{key:"closeWebviewPopup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.verCompare(s.default.appVersion,"2.8.5")<0&&(e=encodeURIComponent(e)),s.default.view.closeViewPopup({url:e,extended:{from_label:n}})}},{key:"wxCharge",value:function(e){var n=this;return new Promise(function(t,a){n.getAppVersion().then(function(n){if(230>n)a(p.LOW);else try{window.ToutiaoJSBridge.call("charge",{type:"weixin",args:{prepay_id:e.prepay_id,timestamp:e.timestamp,nonce_str:e.nonce_str,app_id:e.app_id,sign:e.sign,order_id:e.order_id,partner_id:e.partner_id}},function(e){t(e)})}catch(o){a(p.FAIL)}}).catch(function(){a(p.FAIL)})})}},{key:"iapCharge",value:function(e){var n=this;return new Promise(function(t,a){n.getAppVersion().then(function(n){if(240>n)a(p.LOW);else try{window.ToutiaoJSBridge.call("charge",{type:"iap",args:{diamond_id:e.diamond_id,iap_id:e.iap_id}},function(e){t(e)})}catch(o){a(p.FAIL)}}).catch(function(){a(p.FAIL)})})}},{key:"shareSnapshot",value:function(e){return s.default.app.shareSnapshot(e)}},{key:"openWebview",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0";s.default.verCompare(s.default.appVersion,"2.8.4")>0&&(e=decodeURIComponent(e),n=decodeURIComponent(n)),s.default.view.pushView({url:e,title:n,rotate:t,hide_nav_bar:a,hide_status_bar:o,hide_more:r})}},{key:"openWebviewPopup",value:function(e){s.default.verCompare(s.default.appVersion,"2.8.4")>0&&(e=decodeURIComponent(e)),s.default.view.openWebviewPopup({url:e})}},{key:"setWebviewPopup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"400",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"8",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"1";return s.default.verCompare(s.default.appVersion,"2.8.4")>0&&(e=decodeURIComponent(e)),s.default.view.setWebviewPopup({url:e,width:n,height:t,radius:a,close_by_mask:o})}},{key:"fetch",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.default.app.fetch({url:e,method:n,params:t,data:r}).then(function(e){var n=e.code,t=a(e,["code"]);return{code:n,raw:o({},t)}})}},{key:"antiSpam",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.default.app.antispam({eventName:e,params:n})}},{key:"copyToClipboard",value:function(e){return s.default.device.setClipboardData({data:e})}},{key:"setSearchKeywords",value:function(e){return s.default.app.setSearchKeywords({keywords:e})}},{key:"on",value:function(e,n){window.ToutiaoJSBridge.on(e,n)}}]),e}(),c=new l,d=c;n.default=d});