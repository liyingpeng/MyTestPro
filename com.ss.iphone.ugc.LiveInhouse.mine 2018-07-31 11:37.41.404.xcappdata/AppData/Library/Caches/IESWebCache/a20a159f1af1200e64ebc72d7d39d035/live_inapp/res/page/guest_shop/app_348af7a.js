define("page/guest_shop/app.vue",function(t,e,o){function i(t){return t&&t.__esModule?t:{"default":t}}function s(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=(i(t("component/Bus/index")),i(t("component/util/http"))),a=i(t("node_modules/byted-via-hotsoon/dist/via.hotsoon.min")),r=i(t("component/util/common")),l={data:function(){return{offset:0,count:10,shopList:[],total:0,pending:!1,nomore:!1,listHeight:0,userId:"",reported:[]}},created:function(){document.title=decodeURIComponent(this.getQueryVariable("username"))+"的铺子",this.userId=this.getQueryVariable("uid"),this.getShopList()},mounted:function(){r.default.isHuoshan()&&a.default.app.sendLogV3({eventName:"hotsoon_shop_show",params:{event_belong:"business",enter_from:"other_profile",source:"hotsoon_shop",event_page:"volcano_shop_page",event_type:"show"}},function(){console.log("店铺埋点OJBK")}),this.throttleShowReport=r.default.throttle(this.listScrollHandle,1e3).bind(this),window.addEventListener("scroll",this.throttleShowReport),this.throttleDataRequest=r.default.throttle(this.bindScroll,1e3).bind(this),window.addEventListener("scroll",this.throttleDataRequest)},destroyed:function(){window.removeEventListener("scroll",this.throttleDataRequest),window.removeEventListener("scroll",this.throttleShowReport)},computed:{isFollow:function(){return this.listHeight+80>document.documentElement.clientHeight}},methods:{listScrollHandle:function(t){for(var e=this,o=[],i=t.target.getElementsByTagName("li"),s=0;s<i.length;s++)r.default.hasViewd(i[s])&&!this.reported[s]&&o.push(s);o.forEach(function(t){console.log(t),e.reported[t]=!0,a.default.app.sendLogV3({eventName:"hotsoon_commodity_show",params:{event_belong:"business",enter_from:"other_profile",source:"hotsoon_shop",event_page:"volcano_shop_page",event_module:"commodity_details",event_type:"show",user_id:e.userId,commodity_id:e.shopList[t].promotion_id}},function(){console.log("展现埋点OJBK")})})},getQueryVariable:function(t){for(var e=window.location.search.substring(1),o=e.split("&"),i=0;i<o.length;i++){var s=o[i].split("=");if(s[0]==t)return s[1]}return!1},getShopList:function(){var t=this;return this.pending?void 0:(this.pending=!0,void n.default.get("/ecom/shop/list",{params:{offset:this.offset,count:this.count,userId:this.userId}}).then(function(e){if(t.pending=!1,0===e.data.status_code){var o;(o=t.shopList).push.apply(o,s(e.data.data.promotions)),t.total=e.data.extra.total,t.offset+=10,t.nomore=0===e.data.data.promotions.length,t.nomore&&window.removeEventListener("scroll",t.throttleDataRequest),window.removeEventListener("click",t.getShopList),t.$nextTick(function(){t.listHeight=t.$refs.list.clientHeight})}else window.addEventListener("click",t.getShopList),a.default.app.showToast({title:"网络请求失败，点击空白处重新尝试"})},function(){t.pending=!1,window.addEventListener("click",t.getShopList),a.default.app.showToast({title:"网络请求失败，点击空白处重新尝试"})}).catch(function(){t.pending=!1,window.addEventListener("click",t.getShopList),a.default.app.showToast({title:"网络请求失败，点击空白处重新尝试"})}))},gotoShortVideo:function(t){r.default.isHuoshan()?a.default.app.openShortVideo({video_id:t.toString(),extended:{detail_label:"volcano_shop_page",detail_source:"commodity_details"}}):location.href="https://reflow.huoshan.com/share/item/"+t},bindScroll:function(){var t=document.height||document.body.scrollHeight,e=100;scrollY>=t-innerHeight-e&&this.getShopList()},gotoDetail:function(t){var e=t.detail_url,o=t.title,i=t.promotion_id;r.default.isHuoshan()?(a.default.app.sendLogV3({eventName:"hotsoon_commodity_click",params:{event_belong:"business",enter_from:"other_profile",source:"hotsoon_shop",event_page:"volcano_shop_page",event_module:"commodity_details",event_type:"click",user_id:this.userId,commodity_id:i}},function(){console.log("商品cell点击")}),r.default.isiOS()&&o.length>15?(o=o.slice(0,15)+"...",a.default.view.pushView({url:e,title:o,rotate:"1",hide_nav_bar:"0",hide_status_bar:"0",hide_more:"1"})):a.default.view.pushView({url:e,rotate:"1",hide_nav_bar:"0",hide_status_bar:"0",hide_more:"1"})):location.href=e}}};e.default=l;var d;d=e&&e.__esModule&&e.default?e.default:o.exports,d.render=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"nav-header"},[o("div",{staticClass:"nav-title"},[t._v(t._s(t.total)+"件商品在售")])]),t._v(" "),o("ul",{ref:"list",staticClass:"items-list"},t._l(t.shopList,function(e,i){return o("li",{key:i,staticClass:"item",on:{click:function(){t.gotoDetail(e)}}},[o("a",{staticClass:"item-wrapper",attrs:{href:"javascript:;"}},[o("div",{staticClass:"cover"},[o("img",{attrs:{src:e.cover.url_list[0],alt:""}})]),t._v(" "),o("div",{staticClass:"desc"},[o("div",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),o("div",{staticClass:"price-info-wrapper"},[o("span",{staticClass:"price"},[t._v("￥"+t._s(t._f("formatMoney")(e.price)))]),t._v(" "),o("span",{staticClass:"sold-num"},[t._v("已售"+t._s(t._f("formatNum")(e.sales))+"件")])]),t._v(" "),o("div",{staticClass:"relative-video",on:{click:function(o){o.stopPropagation(),t.gotoShortVideo(e.medias[0])}}},[o("img",{staticClass:"icon-video",attrs:{src:"//hotsoon.snssdk.com/falcon/live_inapp/res/static/image/cmp_shop/icon_electricity_video_d6ecaf2.png",alt:""}}),t._v(" "),o("span",{staticClass:"relative-text"},[t._v("查看相关视频")])])])])])})),t._v(" "),o("div",{"class":[t.isFollow?"follow-footer":"bottom-footer"]},[t.nomore?o("span",{staticClass:"nomore"},[o("span",{staticClass:"loading-text"},[t._v("没有更多内容了")])]):t._e()])])},d.staticRenderFns=[]});